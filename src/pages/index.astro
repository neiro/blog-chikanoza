---
import Layout from '~/layouts/PageLayout.astro';

import Header from '~/components/widgets/Header.astro';
import Hero from '~/components/widgets/Hero.astro';
import Content from '~/components/widgets/Content.astro';
import CallToAction from '~/components/widgets/CallToAction.astro';
import Features3 from '~/components/widgets/Features3.astro';
import Steps from '~/components/widgets/Steps.astro';
import BlogLatestPosts from '~/components/widgets/BlogLatestPosts.astro';
import { getPermalink } from '~/utils/permalinks';

const metadata = {
  title: 'Main page — Backend/Platform Engineer (and occasional human)',
};
---

<Layout metadata={metadata}>
  <Fragment slot="announcement"></Fragment>

  <Fragment slot="header">
    <Header
      links={[
        { text: 'Home', href: '#hero' },
        { text: 'About', href: '#about' },
        { text: 'Blog', href: '#blog' }
      ]}
      actions={[
        { text: 'Contact me', href: '#contact' },
      ]}
      isSticky
      showToggleTheme
    />
  </Fragment>

  <!-- Hero -->

  <Hero
    id="hero"
    title="Vyacheslav Redkin"
    tagline="Backend / Platform Engineer"
    actions={[
      { variant: 'primary', text: 'Get in touch', href: getPermalink('/contact#form') },
    ]}
  >
    <Fragment slot="subtitle">
      I build backend systems, APIs, and self-hosted platforms — the kind that don’t collapse the moment someone refreshes twice. <br />
      Mostly .NET, distributed systems, automation, and pragmatic engineering (a.k.a. “boring in the best way”).
    </Fragment>
  </Hero>

  <!-- About -->

  <Content
    id="about"
    columns={3}
    items={[
      {
        icon: 'tabler:server',
        callToAction: {
          target: '_blank',
          text: 'Self-hosted lab',
          href: '#portfolio',
        },
      },
      {
        icon: 'tabler:world',
        callToAction: {
          target: '_blank',
          text: 'Travel & life notes',
          href: '#blog',
        },
      },
      {
        icon: 'tabler:heart',
        callToAction: {
          target: '_blank',
          text: 'Family first',
          href: '#about',
        },
      },
    ]}
    image={{
      src: 'https://images.unsplash.com/photo-1518770660439-4636190af475',
      alt: 'Workspace',
      loading: 'eager',
    }}
  >
    <Fragment slot="content">
      <h2 class="text-2xl font-bold tracking-tight dark:text-white sm:text-3xl mb-2">
        About me
      </h2>

      <p>
        I’m a software engineer who likes building systems that stay understandable,
        predictable, and maintainable years after launch — not just “works on my machine”
        levels of confidence.
      </p>

      <br />

      <p>
        I care about the full lifecycle: how a system is deployed, monitored, backed up,
        and lived with. If something breaks at 3 AM, I prefer it to break <em>politely</em>
        with logs, metrics, and a clear reason.
      </p>

      <br />

      <p>
        My primary stack is <strong>.NET</strong>, <strong>PostgreSQL</strong>,
        <strong>Docker</strong>, <strong>Kafka / RabbitMQ</strong>, and <strong>Redis</strong>.
        On the frontend I occasionally use <strong>Nuxt 3</strong> when a project needs a clean, modern UI.
      </p>

      <br />

      <p>
        Outside of programming: I’m a family person, I love traveling, exploring cities (especially at night),
        taking photos, and building self-hosted home infrastructure — media servers, backups, automations,
        and “smart” things that don’t require a cloud subscription to turn on a light.
      </p>

      <br />

      <p>
        I value independence, open-source, and solutions that don’t lock you in.
        Simple beats clever — because clever has a habit of turning into “why is this here?” six months later.
      </p>
    </Fragment>

    <Fragment slot="bg">
      <div class="absolute inset-0 bg-blue-50 dark:bg-transparent"></div>
    </Fragment>
  </Content>

  <!-- Experience -->

  <Steps
    id="resume"
    title="Professional experience"
    items={[
      {
        title:
          'Backend / Platform Engineer <br /> <span class="font-normal">Distributed systems & APIs</span>',
        description: `
          Designing and implementing backend services using .NET. <br />
          Building secure APIs (JWT + API keys) for external clients. <br />
          Working with PostgreSQL, Redis, Kafka, and RabbitMQ. <br />
          Containerizing services with Docker and Compose. <br />
          Designing systems with performance, observability, and long-term support in mind. <br />
          (Also: making sure “temporary” solutions don’t become permanent… too often.)
        `,
        icon: 'tabler:briefcase',
      },
    ]}
    classes={{ container: 'max-w-3xl' }}
  />

  <!-- Skills -->

  <Features3
    title="Skills & focus areas"
    subtitle="Stuff I actually use and care about in real projects (not just in tweets)."
    columns={3}
    defaultIcon="tabler:point-filled"
    items={[
      {
        title: '.NET & C#',
        description: 'Modern backend development with performance and clean architecture in mind.',
      },
      {
        title: 'APIs & Security',
        description: 'JWT, API keys, access control, logging, and sane boundaries.',
      },
      {
        title: 'Databases',
        description: 'PostgreSQL modeling, indexing, migrations, and practical optimization.',
      },
      {
        title: 'Docker',
        description: 'Containerized dev and reliable self-hosted environments.',
      },
      {
        title: 'Messaging',
        description: 'Kafka/RabbitMQ for async workflows and event-driven systems.',
      },
      {
        title: 'Redis',
        description: 'Caching, streams/sets, pipelines — fast data when it matters.',
      },
      {
        title: 'System design',
        description: 'Failure modes, scalability, and operations (the real world part).',
      },
      {
        title: 'Self-hosting',
        description: 'Home lab: backups, media, monitoring, automation — without “please subscribe”.',
      },
      {
        title: 'Pragmatism',
        description: 'Simple solutions that survive production and future-you.',
      },
    ]}
  />

  <!-- Portfolio -->

  <Content
    id="portfolio"
    title="Selected projects"
    subtitle="A mix of professional work, personal projects, and infrastructure experiments."
    isReversed
    items={[
      {
        title: 'What it is:',
        description:
          'Backend platform with multiple services, centralized authentication, API-key management, and event-driven communication.',
      },
      {
        title: 'Highlights:',
        description:
          'JWT + API keys, Kafka/RabbitMQ, PostgreSQL, Redis, Docker Compose, self-hosted deployment.',
      },
    ]}
    image={{
      src: 'https://images.unsplash.com/photo-1555949963-aa79dcee981c',
      alt: 'Backend architecture',
    }}
  >
    <Fragment slot="content">
      <h3 class="text-2xl font-bold tracking-tight dark:text-white sm:text-3xl mb-2">
        Backend platform & infrastructure
      </h3>
      <p class="text-muted">
        Built to be boringly reliable — because drama belongs in travel stories, not in production.
      </p>
    </Fragment>

    <Fragment slot="bg">
      <div class="absolute inset-0 bg-blue-50 dark:bg-transparent"></div>
    </Fragment>
  </Content>

  <!-- CTA -->

  <CallToAction
    title="Let’s build something solid"
    subtitle="If you value clarity, reliability, and long-term thinking — we’ll get along just fine."
    actions={[
      { variant: 'primary', text: 'Contact me', href: '#contact' },
    ]}
  />

  <!-- Blog -->

  <BlogLatestPosts
    id="blog"
    title="Notes, experiments, and life stories"
    information={`
      Writing about backend engineering, self-hosting, system design,
      travel impressions, family moments, and whatever I learned the hard way (so you don’t have to).
    `}
  >
    <Fragment slot="bg">
      <div class="absolute inset-0 bg-blue-50 dark:bg-transparent"></div>
    </Fragment>
  </BlogLatestPosts>
</Layout>
